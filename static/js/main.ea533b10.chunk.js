(this["webpackJsonpreact-wikipedia-search-app"]=this["webpackJsonpreact-wikipedia-search-app"]||[]).push([[0],{59:function(e,a,n){e.exports=n(70)},64:function(e,a,n){},70:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),c=n(8),i=n.n(c),l=(n(64),n(11)),s=n(40),o=n(96),u=function(e){return r.a.createElement(o.a,Object.assign({},e,{container:!0,direction:"column"}))},h=function(e){return r.a.createElement(o.a,Object.assign({},e,{container:!0,direction:"row"}))},m=n(13),p=n(99),g=n(100),f=n(3),d=Object(p.a)((function(e){return{resultContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:e.spacing(2,0),"& .searchmatch":{color:e.palette.primary.main,fontWeight:"bold"}},resultContainerReplaceQuery:function(a){var n=a.replaceWithValue;return{"& .searchmatch":{textDecoration:"line-through","&:after":{display:"inline-block",textDecoration:"none",content:'" '.concat(n,'"'),paddingLeft:e.spacing(.25),color:e.palette.secondary.main}}}}}})),v=function(e){var a=e.children,n=e.className,t=e.replaceWithValue,c=e.showReplaceWithValueHighlight,i=Object(m.a)(e,["children","className","replaceWithValue","showReplaceWithValueHighlight"]),l=d({replaceWithValue:t});return r.a.createElement(g.a,Object.assign({className:Object(f.a)(n,l.resultContainer,t&&c&&l.resultContainerReplaceQuery)},i,{divider:!0}),a)},b=n(101),E=function(e){var a=e.children,n=Object(m.a)(e,["children"]);return r.a.createElement(b.a,Object.assign({variant:"body2",component:"div"},n),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}}))},O=Object(p.a)((function(e){return{resultTitle:{marginBottom:e.spacing(1)}}})),j=function(e){var a=e.children,n=e.className,t=Object(m.a)(e,["children","className"]),c=O();return r.a.createElement(b.a,Object.assign({className:Object(f.a)(n,c.resultTitle),variant:"h6"},t),a)},C=n(102),w=function(e){var a=e.variant,n=e.color,r=Object(m.a)(e,["variant","color"]);return t.createElement(C.a,Object.assign({variant:a||"contained",color:n||"primary"},r))},y=n(107),k=n(103),S=n(104),N=Object(p.a)((function(e){return{loadingContainer:{marginBottom:e.spacing(1.5)},circularProgress:{marginLeft:e.spacing(1.5)}}})),W=function(){var e=N();return r.a.createElement(y.a,null,r.a.createElement(h,{alignItems:"center",className:e.loadingContainer},r.a.createElement(b.a,null,"Loading, please wait ..."),r.a.createElement(k.a,{className:e.circularProgress})),r.a.createElement(S.a,null))},R=n(106),x=function(e){var a=e.onChange,n=e.variant,t=e.value,c=Object(m.a)(e,["onChange","variant","value"]),i=r.a.useState(t),s=Object(l.a)(i,2),o=s[0],u=s[1];r.a.useEffect((function(){u(t)}),[t,u]);var h=r.a.useCallback((function(e){var n=e.target.value;u(n),a(n)}),[u,a]);return r.a.createElement(R.a,Object.assign({onChange:h,variant:n||"outlined",value:o},c))},M=function(e){var a=e.onChange,n=e.value,t=e.disabled;return r.a.createElement(x,{id:"replace-phrase",label:"Replace with",onChange:a,disabled:t,value:n,type:"text"})},L=function(e){var a=e.onChange,n=e.value;return r.a.createElement(x,{id:"search-phrase",label:"Search phrase",onChange:a,value:n,type:"text"})},V=n(38),B=n.n(V),F=n(47),I=n(48),Q=n.n(I),H=function(){var e=r.a.useState(!1),a=Object(l.a)(e,2),n=a[0],t=a[1];return{isFetching:n,getSearchWikiPhrase:r.a.useCallback((function(e){return t(!0),function(e){return fetch("".concat("https://en.wikipedia.org/w/","api.php?action=query&list=search&format=json&srsearch=%22").concat(encodeURI(e),"%22&srlimit=10&origin=*")).then((function(e){if(200===e.status)return e.json();throw e}))}(e).then((function(e){return e})).catch((function(){})).finally((function(){t(!1)}))}),[t])}},P=function(){var e=r.a.useState(!1),a=Object(l.a)(e,2),n=a[0],t=a[1],c=r.a.useCallback((function(e){return function(){t(e)}}),[t]);return{hovered:n,onMouseOver:c(!0),onMouseLeave:c(!1)}},q=n(105),D=n(39),T=function(e,a){return e.replaceAll(/<span class="searchmatch">.+<\/span>/gm,'<span class="searchmatch">'.concat(a,"</span>"))},J=Object(p.a)((function(e){return{main:{margin:e.spacing(2),maxWidth:750},searchButton:{margin:e.spacing(0,1)},buttonsContainer:{width:"auto","& > *":{margin:e.spacing(0,1)}},row:{margin:e.spacing(1.5,0)}}})),_=function(e,a){var n=e.findIndex((function(e){return e.snippet.includes('<span class="searchmatch">')}));if(n<0)return e;var t,r,c,i=e[n],l=Object(s.a)({},i,{snippet:T(i.snippet,a)});return t=e,r=l,c=n,[].concat(Object(D.a)(t.slice(0,c)),[r],Object(D.a)(t.slice(c+1,t.length)))},A=function(e,a){return e.map((function(e){return Object(s.a)({},e,{snippet:T(e.snippet,a)})}))},U=function(){var e=J(),a=function(){var e=r.a.useState(""),a=Object(l.a)(e,2),n=a[0],t=a[1],c=r.a.useState(),i=Object(l.a)(c,2),s=i[0],o=i[1],u=H(),h=u.getSearchWikiPhrase,m=u.isFetching,p=r.a.useCallback((function(e){return Object(F.a)(B.a.mark((function a(){var n;return B.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h(e);case 2:n=a.sent,o(n.query.search);case 4:case"end":return a.stop()}}),a)})))}),[h,o]),g=r.a.useCallback(Q()(p(n),1e3),[n,p]),f=r.a.useCallback((function(){g.flush()}),[g]);return r.a.useEffect((function(){return n.length>0&&g(),function(){return g.cancel()}}),[n,g]),{isFetching:m,searchQuery:n,setSearchQuery:t,searchResults:s,setSearchResults:o,runSearchFlush:f}}(),n=a.isFetching,t=a.searchQuery,c=a.searchResults,i=a.setSearchQuery,s=a.setSearchResults,o=a.runSearchFlush,m=r.a.useState(""),p=Object(l.a)(m,2),g=p[0],f=p[1],d=P(),O=d.hovered,C=d.onMouseOver,y=d.onMouseLeave,k=P(),S=k.hovered,N=k.onMouseOver,R=k.onMouseLeave,x=r.a.useCallback((function(e,a){return function(){var n=a?A:_;s((function(a){return n(a,e)})),a&&f("")}}),[s,f]),V=n||!t||!c||0===!c.length,I=V||!g;return r.a.createElement("main",{className:e.main},r.a.createElement(u,null,r.a.createElement(h,{className:e.row},r.a.createElement(L,{value:t,onChange:i}),r.a.createElement(w,{disabled:n||!t,onClick:o,className:e.searchButton},"Search")),r.a.createElement(h,{className:e.row},r.a.createElement(M,{disabled:V,value:g,onChange:f}),r.a.createElement(h,{className:e.buttonsContainer},r.a.createElement(w,{disabled:I,onClick:x(g,!1),onMouseOver:C,onMouseLeave:y,variant:"outlined"},"Replace"),r.a.createElement(w,{variant:"outlined",disabled:I,onClick:x(g,!0),onMouseOver:N,onMouseLeave:R},"Replace all")))),n&&r.a.createElement(W,null),c&&c.length>0&&r.a.createElement(q.a,null,c.map((function(e,a){return r.a.createElement(v,{key:e.title,replaceWithValue:g,showReplaceWithValueHighlight:0===a&&O||S},r.a.createElement(j,null,e.title),r.a.createElement(E,null,e.snippet))}))),c&&0===c.length&&r.a.createElement(b.a,null,"No results for your search query."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.ea533b10.chunk.js.map